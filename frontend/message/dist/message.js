var socket=io("http://localhost:3100"),queue=[],sound=document.querySelector(".sound"),container=document.querySelector(".subalert"),usernameEl=document.querySelector(".username"),messageEl=document.querySelector(".message"),typeEl=document.querySelector(".type"),user=document.querySelector(".user"),months=document.querySelector(".months"),displayTime=5e3,ttsTime=2e4,lastTen=[],playing=!1,list=document.getElementsByClassName("content")[0],removeElement=function(e){e.parentNode.removeChild(e)},notify=function(e){if(null!==e&&(queue.push(e),$(user).show()),!playing){playing=!0;{var t="http://hosted.stylerdev.io:3100/synthesize?voice=en-US_AllisonVoice&text=",n=new Audio,o=queue[0].message;queue[0].username,queue[0].type}switch(messageEl.textContent=o,usernameEl.textContent=queue[0].username,queue[0].type){case"userMsg":typeEl.textContent="Viewer Message";break;case"resubMsg":typeEl.textContent="Resub: ("+queue[0].resub+") Month(s)!";break;case"subMsg":typeEl.textContent="New Subscriber!";break;default:console.warn("Failed retrieve type"),typeEl.textContent="Error"}queue.shift(),container.classList.add("visible"),setTimeout(function(){n.load(),n.src=t+encodeURIComponent(o),n.onended=function(){setTimeout(function(){playing=!1,queue.length>0&&notify(null)},5e3)},n.play()},1e3),setTimeout(function(){container.classList.remove("visible")},6e3)}};socket.on("message",notify),socket.on("stopSound",function(){sound.stop()});