var socket=io("http://localhost:3100"),lastTen=[],list=document.getElementsByClassName("content")[0],sectionFactory=function(s,e,a){a>0?list.insertAdjacentHTML("beforeend",'<div class="cart"><div class="img-hold"> img link </div><div class ="message-wrap"><div class ="user-info"> <span class="username">'+s+" (resub "+a+'months)</span><span class="time"> '+Date.getDate()+"/"+Date.getMonth()+"/"+Date.getFullYear()+'</span></div></div></div> <span class="message">'+e+"</span></div></section>"):ist.insertAdjacentHTML("beforeend",'<div class="cart"><div class="img-hold"> img link </div><div class ="message-wrap"><div class ="user-info"> <span class="username">'+s+'(New Subscriber)</span><span class="time"> 15 minutes ago </div><span class="date"> 0.1.08.2015 </span></div></div> <span class="message">'+e+"</span></div></section>")},findLastTen=function(s){if(null!==s){lastTen.unshift(s),lastTen.length>10&&lastTen.pop(),list.innerHTML=" ";for(var e=0;e<lastTen.length;e++)sectionFactory(lastTen[e].username,lastTen[e].message,lastTen[e].resub)}};sectionFactory("test","test",5),socket.on("subMsg",findLastTen);