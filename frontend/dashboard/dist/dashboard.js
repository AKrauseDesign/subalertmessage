var socket=io("http://localhost:3100"),lastTen=[],list=document.getElementsByClassName("content")[0],getAvatar=function(s){console.log("testing..."),$.getJSON("https://api.twitch.tv/kraken/users/"+s+"?&callback=?",function(s){return console.log(s.logo),s.logo})},sectionFactory=function(s,e,t){var a=new Date;t>0?list.insertAdjacentHTML("beforeend",'<div class="cart"><div class="img-hold"> <img src="'+getAvatar(s)+'"> </div><section class ="message-wrap"><div class ="user-info"> <span class="username">'+s+" (Resub for "+t+' months)</span><span class="time">'+a.getDate()+"/"+a.getMonth()+"/"+a.getFullYear()+'</span></div><p class="message">'+e+"</p></div></div></section></div>"):list.insertAdjacentHTML("beforeend",'<div class="cart"><div class="img-hold"> <img src="'+getAvatar(s)+'"> </div><section class ="message-wrap"><div class ="user-info"> <span class="username">'+s+' (New Subscriber)</span><span class="time">'+a.getDate()+"/"+a.getMonth()+"/"+a.getFullYear()+'</span></div><p class="message">'+e+"</p></div></div></section></div>")},findLastTen=function(s){if(null!==s){lastTen.unshift(s),lastTen.length>10&&lastTen.pop(),list.innerHTML=" ";for(var e=0;e<lastTen.length;e++)sectionFactory(lastTen[e].username,lastTen[e].message,lastTen[e].resub)}};sectionFactory("itsAwesomeBacon","hey kappa kappa hey",4),socket.on("subMsg",findLastTen);